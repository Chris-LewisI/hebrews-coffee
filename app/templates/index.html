<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HeBrews Coffee Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet" />

</head>
<body class="p-4">
  <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4 rounded">
    <div class="container-fluid">
      <a class="navbar-brand" href="{{ url_for('index') }}">
        <!-- Replace below text with an <img> tag if you have a logo image -->
        <strong>HeBrews</strong>
      </a>
      <div class="d-flex">
        <a href="{{ url_for('completed_orders') }}" class="btn btn-outline-warning">Completed Orders</a>
      </div>
    </div>
  </nav>
  <h1>HeBrews Coffee Cart</h1>

  <form action="{{ url_for('order') }}" method="post" class="mb-4">
    <div class="row g-2 align-items-end">

      <div class="col-md-3">
        <label for="customer_name" class="form-label">Name</label>
        <input type="text" name="customer_name" id="customer_name" class="form-control" placeholder="Customer Name" required>
      </div>

      <div class="col-md-3">
        <label for="drink" class="form-label">Drink</label>
        <select name="drink" id="drink" class="form-select" required>
          <option value="">Select a drink</option>
          <option value="Latte">Latte ($4)</option>
          <option value="Coffee">Coffee ($3)</option>
        </select>
      </div>

      <div class="col-md-2">
        <label for="size" class="form-label">Size</label>
        <select name="size" id="size" class="form-select" required>
          <option>Small</option>
          <option>Medium</option>
          <option>Large</option>
        </select>
      </div>

      <div class="col-md-2">
        <label for="milk" class="form-label">Milk</label>
        <select name="milk" id="milk" class="form-select" required>
          <option>Whole</option>
          <option>Oat</option>
          <option>Soy</option>
          <option>Almond</option>
          <option>None</option>
        </select>
      </div>

      <div class="col-md-2">
        <label for="temperature" class="form-label">Temperature</label>
        <select name="temperature" id="temperature" class="form-select" required>
          <option value="Hot">Hot</option>
          <option value="Iced">Iced</option>
        </select>
      </div>

      <div class="col-md-2 d-flex align-items-center">
        <div class="form-check mt-4">
          <input class="form-check-input" type="checkbox" id="extra_shot" name="extra_shot" value="true">
          <label class="form-check-label" for="extra_shot">
            Extra Shot (+$1)
          </label>
        </div>
      </div>

      <div class="col-md-12 mt-3">
        <label for="notes" class="form-label">Notes</label>
        <input type="text" name="notes" id="notes" class="form-control" placeholder="Extra hot, no foam, etc.">
      </div>

    </div>

    <div class="mt-3">
      <button class="btn btn-primary" type="submit">Place Order</button>
    </div>
  </form>

  <div class="pending-orders">
    <h3>In Progress Orders</h3>
    {% set in_progress = orders | selectattr('status', '!=', 'completed') | list %}
    {% if in_progress %}
      <ul class="list-group">
        {% for order in in_progress %}
          <li class="list-group-item d-flex justify-content-between align-items-center">

            <div>
              <strong>{{ order.customer_name }}'s {{ order.drink }}</strong> ({{ order.size }}, {{ order.milk }}, {{ order.temperature }})
              {% if order.extra_shot %}
                <br><small class="text-muted">+ Extra Shot</small>
              {% endif %}
              {% if order.notes %}
                <br><small class="text-muted">Note: {{ order.notes }}</small>
              {% endif %}
              <br><small class="fw-bold">Price: ${{ "%.2f"|format(order.price) }}</small>
            </div>

            <div class="d-flex gap-2">
              <form action="{{ url_for('delete_order', order_id=order.id) }}" method="post" style="margin: 0;">
                <button class="btn btn-warning btn-sm">Create Label</button>
              </form>
              <form action="{{ url_for('update_status', order_id=order.id, status='completed') }}" method="post" style="margin: 0;">
                <button class="btn btn-success btn-sm">Mark Completed</button>
              </form>
              <form action="{{ url_for('delete_order', order_id=order.id) }}" method="post" style="margin: 0;">
                <button class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this order?')">Delete</button>
              </form>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No orders in progress.</p>
    {% endif %}
  </div>
</body>
</html>
